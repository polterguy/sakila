
<h1 mat-dialog-title>{{(data.isEdit ? 'Edit' : 'Create') | translate}} {{'Rental' | translate}}</h1>
<div mat-dialog-content>

  <app-magic-autocomplete
    *ngIf="canEditColumn('customer_id')"
    [model]="data.entity"
    field="customer_id"
    key="customer_id"
    table="customer"
    value="first_name"
    [placeholder]="('Choose a ' | translate) + ('customer_id' | translate)"
    class="entity-edit-field"
    (change)="changed('customer_id')"
    [getItems]="service.sakila_customer">
  </app-magic-autocomplete>

  <app-magic-selector
    *ngIf="canEditColumn('staff_id')"
    [model]="data.entity"
    field="staff_id"
    key="staff_id"
    value="first_name"
    [placeholder]="('Choose a ' | translate) + ('staff_id' | translate)"
    class="entity-edit-field"
    (change)="changed('staff_id')"
    [getItems]="service.sakila_staff.read({limit:-1})">
  </app-magic-selector>

  <mat-form-field
    *ngIf="canEditColumn('rental_date')"
    class="entity-edit-field"
    appearance="outline">
    <mat-label>{{'rental_date' | translate}}</mat-label>
    <input
      matInput
      (change)="changed('rental_date')"
      [owlDateTime]="pickerrental_date"
      [owlDateTimeTrigger]="pickerrental_date"
      [(ngModel)]="data.entity.rental_date"
      autocomplete="off">
    <owl-date-time #pickerrental_date (afterPickerClosed)="changed('rental_date')"></owl-date-time>
    <mat-icon matSuffix matDatepickerToggleIcon>calendar_today</mat-icon>
  </mat-form-field>

  <mat-form-field
    *ngIf="canEditColumn('return_date')"
    class="entity-edit-field"
    appearance="outline">
    <mat-label>{{'return_date' | translate}}</mat-label>
    <input
      matInput
      (change)="changed('return_date')"
      [owlDateTime]="pickerreturn_date"
      [owlDateTimeTrigger]="pickerreturn_date"
      [(ngModel)]="data.entity.return_date"
      autocomplete="off">
    <owl-date-time #pickerreturn_date (afterPickerClosed)="changed('return_date')"></owl-date-time>
    <mat-icon matSuffix matDatepickerToggleIcon>calendar_today</mat-icon>
  </mat-form-field>

  <mat-form-field
    *ngIf="canEditColumn('rental_id')"
    class="entity-edit-field"
    appearance="outline">
    <mat-label>{{'rental_id' | translate}}</mat-label>
    <input
      matInput
      type="number"
      step="1"
      (change)="changed('rental_id')"
      [(ngModel)]="data.entity.rental_id"
      autocomplete="off">
  </mat-form-field>

  <mat-form-field
    *ngIf="canEditColumn('inventory_id')"
    class="entity-edit-field"
    appearance="outline">
    <mat-label>{{'inventory_id' | translate}}</mat-label>
    <input
      matInput
      type="number"
      step="1"
      (change)="changed('inventory_id')"
      [(ngModel)]="data.entity.inventory_id"
      autocomplete="off">
  </mat-form-field>

</div>

<div mat-dialog-actions>

  <div class="right-aligned">

    <button 
      mat-raised-button
      color="primary"
      (click)="upsert()">{{'Save' | translate}}</button>

    <button
      mat-button
      (click)="close(null)">{{'Cancel' | translate}}</button>

  </div>

</div>
